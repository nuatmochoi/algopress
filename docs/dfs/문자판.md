# 문자판 - BOJ

[문자판 - BOJ](https://www.acmicpc.net/problem/2186)

```py
import sys

def dfs(x, y, idx):
    if idx == len(target):
        return 1
    if cnt[y][x][idx] != -1:
        return cnt[y][x][idx]

    cnt[y][x][idx] = 0
    for i in range(4):
        tx, ty = x, y
        for k in range(1, K + 1):
            nx = tx + dx[i] * k
            ny = ty + dy[i] * k
            if 0 > nx or 0 > ny or ny >= N or nx >= M:
                continue
            if board[ny][nx] == target[idx]:
                cnt[y][x][idx] += dfs(nx, ny, idx + 1)

    return cnt[y][x][idx]

dx = [0, 0, -1, 1]
dy = [-1, 1, 0, 0]

N, M, K = map(int, sys.stdin.readline().rstrip().split())
board = [list(sys.stdin.readline().rstrip()) for _ in range(N)]
target = list(sys.stdin.readline().rstrip())
cnt = [[[-1] * len(target) for _ in range(M)] for _ in range(N)]
ret = 0

fir = []
for i in range(N):
    for j in range(M):
        if board[i][j] == target[0]:
            fir.append((i, j))

for y, x in fir:
    ret += dfs(x, y, 1)

print(ret)
```
